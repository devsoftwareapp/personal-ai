<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Personal AI</title>
<style>
body {
  font-family: Arial;
  padding: 20px;
  background: #111;
  color: white;
}
input, button {
  padding: 10px;
  font-size: 16px;
}
#chat {
  margin-top: 20px;
  white-space: pre-wrap;
}
</style>
</head>
<body>

<h2 id="status">AI yÃ¼kleniyor...</h2>

<input id="input" placeholder="Mesaj yaz" style="width:70%">
<button onclick="send()">GÃ¶nder</button>

<div id="chat"></div>

<script type="module">

import { pipeline } from "https://cdn.jsdelivr.net/npm/@xenova/transformers";

let generator;
let history = "";

async function load() {

  generator = await pipeline(
    "text-generation",
    "Xenova/distilgpt2",
    { quantized: true }
  );

  document.getElementById("status").innerText = "AI hazÄ±r";
}

window.send = async function() {

  const input = document.getElementById("input");
  const chat = document.getElementById("chat");

  const userText = input.value.trim();
  if (!userText) return;

  chat.innerHTML += "\nðŸ§‘ Sen: " + userText;
  chat.innerHTML += "\nðŸ¤– AI dÃ¼ÅŸÃ¼nÃ¼yor...";

  input.value = "";

  const prompt =
    history +
    "\nUser: " + userText +
    "\nAI:";

  const result = await generator(prompt, {
    max_new_tokens: 20,
    do_sample: false
  });

  let output = result[0].generated_text;

  let answer = output.split("AI:").pop().trim();

  chat.innerHTML =
    chat.innerHTML.replace("ðŸ¤– AI dÃ¼ÅŸÃ¼nÃ¼yor...", "ðŸ¤– AI: " + answer);

  history += "\nUser: " + userText + "\nAI: " + answer;

}

load();

</script>

</body>
</html>
